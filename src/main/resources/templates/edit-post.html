<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>글 수정</title>
    <style>
        :root{--bg:#0f1115;--card:#171922;--muted:#9aa4b2;--fg:#eef2f7;--acc:#7aa2f7}
        body{margin:0;background:var(--bg);color:var(--fg);font-family:ui-sans-serif,system-ui}
        .wrap{max-width:760px;margin:32px auto;padding:0 16px}
        .title{font-size:24px;font-weight:800;margin-bottom:12px}
        .card{background:var(--card);border:1px solid #232838;border-radius:16px;padding:20px}
        label{display:block;margin:10px 0 6px;color:var(--muted)}
        input[type=text], textarea{
            width:100%;padding:12px 14px;border-radius:12px;border:1px solid #2a2f3a;background:#0f1320;color:var(--fg);
        }
        textarea{min-height:240px;resize:vertical}
        .row{display:flex;gap:10px;margin-top:16px}
        .btn{padding:10px 14px;border-radius:10px;border:1px solid #2a2f3a;background:#1b1f2a;color:var(--fg);text-decoration:none}
        .btn:hover{border-color:var(--acc);box-shadow:0 0 0 3px #7aa2f722}
        .btn.acc{background:linear-gradient(135deg,var(--acc),#9b8afc);border-color:transparent}
        .meta{color:var(--muted);font-size:12px;margin-bottom:8px}
    </style>
</head>
<body>

<!-- post가 List면 첫 요소, 아니면 PostM, 없으면 null -->
<div class="wrap"
     th:with="first=${post == null ? null : (#lists.isList(post) ? #lists.first(post) : post)}">

    <div class="title">글 수정</div>

    <!-- 결과 없음 -->
    <div class="card" th:if="${first == null}">
        <div class="meta">수정할 게시글을 찾을 수 없습니다. (제목으로 검색 결과 없음)</div>
        <div style="margin-top:8px"><a class="btn" href="/posts">목록으로</a></div>
    </div>

    <!-- 첫 글 바인딩 -->
    <div class="card" th:if="${first != null}">
        <div class="meta">
            ID:
            <span th:title="${first.id}"
                  th:text="${#strings.length(first.id) > 3 ? #strings.substring(first.id,0,3) + '...' : first.id}">
        id
      </span>
        </div>

        <!-- 컨트롤러 규약 유지: POST /posts/{id}/edit -->
        <form th:action="@{|/posts/${first.id}/edit|}" method="post" th:object="${first}">
            <label for="title">제목</label>
            <input id="title" type="text" th:field="*{title}" required maxlength="100"/>

            <label for="content">내용</label>
            <textarea id="content" th:field="*{content}" required></textarea>

            <div class="row">
                <a class="btn" th:href="@{|/post/${first.id}|}">취소</a>
                <button class="btn acc" type="submit">저장</button>
            </div>
        </form>
    </div>
</div>
</body>
</html>


